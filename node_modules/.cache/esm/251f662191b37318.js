let express,axios;_91b‍.x([["router",()=>router],["prefix",()=>prefix]]);_91b‍.w("express",[["default",["express"],function(v){express=v}]]);_91b‍.w("axios",[["default",["axios"],function(v){axios=v}]]);


       const router = express.Router();
       const prefix = '/spotify';

router.get('/artist', function (req, res) {  

    //  search term should be artist's name
    var searchTerm = req.query.searchTerm;
    var querySpotify = async () => {
        var result = await axios({
          method: 'get',
          url: 'https://api.spotify.com/v1/search?q=' + searchTerm + '&type=artist',
          headers: {
            'Authorization': 'Bearer ' + 'BQCs--w4zAkgnJXpcjTQNoGhyvsBaCXmuwvgG9QewnE728zqEuJRIH0WdIrksYlMiOsylOnfWBuFGqcEZAXNChhx1d6dePuoYEplWb3gZYeFgLyeKKsCIogdb8oxyUSkc39SvZ0bl15zJ6Nksc27JG9fbxDMRSk',
            'Content-Type': 'application/json',
          }
        });
        return result;
      }
    
      querySpotify().then(function(result) {
        res.send(result.data.artists.items);
      })
});

router.get('/artistAlbums', function (req, res) {

    // search term should be the artist's spotifyID
    var searchTerm = req.query.searchTerm;

    // 38EmEgXkgK51MT2tPY0EoC = bobby

    var querySpotify = async () => {
        var result = await axios({
          method: 'get',
          url: 'https://api.spotify.com/v1/artists/' + searchTerm + '/albums?limit=20',
          headers: {
            'Authorization': 'Bearer ' + 'BQCs--w4zAkgnJXpcjTQNoGhyvsBaCXmuwvgG9QewnE728zqEuJRIH0WdIrksYlMiOsylOnfWBuFGqcEZAXNChhx1d6dePuoYEplWb3gZYeFgLyeKKsCIogdb8oxyUSkc39SvZ0bl15zJ6Nksc27JG9fbxDMRSk',
            'Content-Type': 'application/json',
          }
        });
        return result;
      }
    
      querySpotify().then(function(result) {
        res.send(result.data);
      }) 

});